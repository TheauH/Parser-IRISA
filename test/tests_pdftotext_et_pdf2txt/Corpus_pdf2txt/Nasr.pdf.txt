86

Proceedings of the ACL-HLT 2011 System Demonstrations, pages 86–91,

Portland, Oregon, USA, 21 June 2011. c(cid:13)2011 Association for Computational Linguistics

MACAONAnNLPToolSuiteforProcessingWordLatticesAlexisNasrFr´ed´ericB´echetJean-Franc¸oisReyBenoˆıtFavreJosephLeRoux∗Laboratoired’InformatiqueFondamentaledeMarseille-CNRS-UMR6166Universit´eAix-Marseille(alexis.nasr,frederic.bechet,jean-francois.rey,benoit.favre,joseph.le.roux)@lif.univ-mrs.frAbstractMACAONisatoolsuiteforstandardNLPtasksdevelopedforFrench.MACAONhasbeende-signedtoprocessbothhuman-producedtextandhighlyambiguousword-latticesproducedbyNLPtools.MACAONismadeofseveralna-tivemodulesforcommontaskssuchasatok-enization,apart-of-speechtaggingorsyntac-ticparsing,allcommunicatingwitheachotherthroughXMLﬁles.Inaddition,exchangepro-tocolswithexternaltoolsareeasilydeﬁnable.MACAONisafast,modularandopentool,dis-tributedunderGNUPublicLicense.1IntroductionTheautomaticprocessingoftextualdatageneratedbyNLPsoftware,resultingfromMachineTransla-tion,AutomaticSpeechRecognitionorAutomaticTextSummarization,raisesnewchallengesforlan-guageprocessingtools.Unlikenativetexts(textsproducedbyhumans),thisnewkindoftextsistheresultofimperfectprocessorsandtheyaremadeofseveralhypotheses,usuallyweightedwithcon-ﬁdencemeasures.Automatictextproductionsys-temscanproducetheseweightedhypothesesasn-bestlists,wordlattices,orconfusionnetworks.Itiscrucialforthisspaceofambiguoussolutionstobekeptforlaterprocessingsincetheambiguitiesofthelowerlevelscansometimesberesolvedduringhigh-levelprocessingstages.Itisthereforeimportanttobeabletorepresentthisambiguity.∗ThisworkhasbeenfundedbytheFrenchAgenceNationalepourlaRecherche,throughtheprojectsSEQUOIA(ANR-08-EMER-013)andDECODA(2009-CORD-005-01)MACAONisasuiteoftoolsdeveloppedtopro-cessambiguousinputandextendinferenceofin-putmoduleswithinaglobalscope.Itcon-sistsinseveralmodulesthatperformclassicalNLPtasks(tokenization,wordrecognition,part-of-speechtagging,lemmatization,morphologicalanal-ysis,partialorfullparsing)oneithernativetextorwordlattices.MACAONisdistributedunderGNUpubliclicenceandcanbedownloadedfromhttp://www.macaon.lif.univ-mrs.fr/.Fromageneralpointofview,aMACAONmodulecanbeseenasanannotationdevice1whichaddsanewlevelofannotationtoitsinputthatgenerallyde-pendsonannotationsfromprecedingmodules.ThemodulescommunicatethroughXMLﬁlesthatallowtherepresentationdifferentlayersofannotationaswellasambiguitiesateachlayer.Moreover,theini-tialXMLstructuringoftheprocessedﬁles(logicalstructuringofadocument,informationfromtheAu-tomaticSpeechRecognitionmodule...)remainsuntouchedbytheprocessingstages.Asalreadymentioned,oneofthemaincharac-teristicsofMACAONistheabilityforeachmoduletoacceptambiguousinputsandproduceambiguousoutputs,insuchawaythatambiguitiescanbere-solvedatalaterstageofprocessing.ThecompactrepresentationofambiguousstructuresisattheheartoftheMACAONexchangeformat,describedinsec-tion2.Furthermoreeverymodulecanweightthesolutionsitproduces.suchweightscanbeusedtoranksolutionsorlimittheirnumberforlaterstages1Annotationmustbetakenhereinageneralsensewhichin-cludestagging,segmentationortheconstructionofmorecom-plexobjetsassyntagmaticordependenciestrees.87

ofprocessing.SeveralprocessingtoolssuitesalreadexistforFrenchamongwhichSXPIPE(SagotandBoullier,2008),OUTILEX(Blancetal.,2006),NOOJ2orUNI-TEX3.AgeneralcomparisonofMACAONwiththesetoolsisbeyondthescopeofthispaper.LetusjustmentionthatMACAONshareswithmostofthemtheuseofﬁnitestatemachinesascoredatarepresen-tation.Somemodulesareimplementedasstandardoperationsonﬁnitestatemachines.MACAONcanalsobecomparedtothenumerousdevelopmentframeworksfordeveloppingprocess-ingtools,suchasGATE4,FREELING5,ELLOGON6orLINGPIPE7thatareusuallylimitedtotheprocess-ingofnativetexts.TheMACAONexchangeformatsharesacer-tainnumberoffeatureswithlinguisticannotationschemestandardssuchastheTextEncodingInitia-tive8,XCES9,orEAGLES10.Theyallaimatdeﬁningstandardsforvarioustypesofcorpusannotations.ThemaindifferencebetweenMACAONandtheseapproachesisthatMACAONdeﬁnesanexchangefor-matbetweenNLPmodulesandnotanannotationformat.Moreprecisely,thisformatisdedicatedtothecompactrepresentationofambiguity:somein-formationrepresentedintheexchangeformataretobeinterpretedbyMACAONmodulesandwouldnotbepartofanannotationformat.Moreover,theMACAONexchangeformatwasdeﬁnedfromthebottomup,originatingfromtheauthors’needtouseseveralexistingtoolsandadapttheirinput/outputformatsinorderforthemtobecompatible.Thisisincontrastwithatopdownapproachwhichisusuallychosenwhenspecifyingastandard.Still,MACAONsharesseveralcharacteristicswiththeLAF(IdeandRomary,2004)whichaimsatdeﬁninghighlevelstandardsforexchanginglinguisticdata.2www.nooj4nlp.net/pages/nooj.html3www-igm.univ-mlv.fr/˜unitex4gate.ac.uk5garraf.epsevg.upc.es/freeling6www.ellogon.org7alias-i.com/lingpipe8www.tei-c.org/P59www.xml-ces.org10www.ilc.cnr.it/eagles/home.html2TheMACAONexchangeformatTheMACAONexchangeformatisbasedonfourcon-cepts:segment,attribute,annotationlevelandseg-mentation.Asegmentreferstoasegmentofthetextorspeechsignalthatistobeprocessed,asasentence,aclause,asyntacticconstituent,alexicalunit,anamedentity...Asegmentcanbeequippedwithat-tributesthatdescribesomeofitsaspects.Asyntac-ticconstituent,forexample,willdeﬁnetheattributetypewhichspeciﬁesitssyntactictype(NounPhrase,VerbPhrase...).Asegmentismadeofoneormoresmallersegments.Asequenceofsegmentscoveringawholesen-tenceforwrittentext,oraspokenutterancefororaldata,iscalledasegmentation.Suchasequencecanbeweighted.Anannotationlevelgroupstogethersegmentsofasametype,aswellassegmentationsdeﬁnedonthesesegments.Fourlevelsarecurrentlydeﬁned:pre-lexical,lexical,morpho-syntacticandsyntactic.Tworelationsaredeﬁnedonsegments:theprece-dencerelationthatorganiseslinearlysegmentsofagivenlevelintosegmentationsandthedominancerelationthatdescribeshowasegmentisdecomposedinsmallersegmentseitherofthesamelevelorofalowerlevel.Wehaverepresentedinﬁgure2,aschematicrep-resentationoftheanalysisofthereconstructedout-putaspeechrecognizerwouldproduceonthein-puttimeﬂieslikeanarrow11.Threeannotationlev-elshavebeenrepresented,lexical,morpho-syntacticandsyntactic.Eachlevelisrepresentedbyaﬁnite-stateautomatonwhichmodelstheprecedencerela-tiondeﬁnedoverthesegmentsofthislevel.Seg-menttime,forexample,precedessegmentﬂies.Thesegmentsareimplicitlyrepresentedbythelabelsoftheautomaton’sarcs.Thislabelshouldbeseenasareferencetoamorecomplexobjet,theactualseg-ment.Thedominancerelationsarerepresentedwithdashedlinesthatlinksegmentsofdifferentlevels.Segmenttime,forexample,isdominatedbyseg-mentNNofthemorpho-syntacticlevel.Thisexampleillustratesthedifferentambiguitycasesandthewaytheyarerepresented.11Forreadabilityreasons,wehaveusedanEnglishexample,MACAON,asmentionedabove,currentlyexistsforFrench.88

thymetimeflieslikelikenanarrowarowJJINVBDTNNDTNNVBNNNNVBZVBVBVPVPNPNPVPNPVPVPPPNPNPFigure1:Threeannotationlevelsforasamplesentence.Plainlinesrepresentannotationhypotheseswithinalevelwhiledashedlinesrepresentlinksbetweenlevels.Trian-gleswiththetipupare“and”nodesandtriangleswiththetipdownare“or”nodes.Forinstance,inthepart-of-speechlayer,TheﬁrstNNcaneitherreferto“time”or“thyme”.Inthechunkinglayer,segmentsthatspanmul-tiplepart-of-speechtagsarelinkedtothemthrough“and”nodes.Themostimmediateambiguityphenomenonisthesegmentationambiguity:severalsegmentationsarepossibleateverylevel.Thisambiguityisrep-resentedinacompactwaythroughthefactoringofsegmentsthatparticipateindifferentsegmentations,bywayofaﬁnitestateautomaton.Thesecondambiguityphenomenonisthedom-inanceambiguity,whereasegmentcanbedecom-posedinseveralwaysintolowerlevelsegments.Suchacaseappearsintheprecedingexample,wheretheNNsegmentappearinginoneoftheoutgoingtransitionoftheinitialstateofthemorpho-syntacticleveldominatesboththymeandtimesegmentsofthelexicallevel.Thetrianglewiththetipdownisan“or”node,modelingthefactthatNNcorrespondstotimeorthyme.Triangleswiththetipupare“and”nodes.TheymodelthefactthatthePPsegmentofthesyntac-ticleveldominatessegmentsIN,DTandNNofthemorpho-syntacticlevel.2.1XMLrepresentationTheMACAONexchangeformatisimplementedinXML.AsegmentisrepresentedwiththeXMLtag<segment>whichhasfourmandatoryattributes:•typeindicatesthetypeofthesegment,fourdif-ferenttypesarecurrentlydeﬁned:atome(pre-lexicalunitusuallyreferredtoastokeninen-glish),ulex(lexicalunit),cat(partofspeech)andchunk(anonrecursivesyntacticunit).•idassociatestoasegmentauniqueidentiﬁerinthedocument,inordertobeabletoreferenceit.•startandenddeﬁnethespanofthesegment.Thesetwoattributesarenumericalandrepre-senteithertheindexoftheﬁrstandlastchar-acterofthesegmentinthetextstringorthebeginningandendingtimeofthesegmentinaspeechsignal.Asegmentcandeﬁneotherattributesthatcanbeusefulforagivendescriptionlevel.Weoftenﬁndthestypeattributethatdeﬁnessubtypesofagiventype.Thedominancerelationisrepresentedthroughtheuseofthe<sequence>tag.ThedominationofthethreesegmentsIN,DTandNNbyaPPsegment,mentionnedaboveisrepresentedbelow,wherep1,p2andp3arerespectivelytheidsofsegmentsIN,DTandNN.<segmenttype="chunk"stype="PP"id="c1"><sequence><eltsegref="p1"/><eltsegref="p2"/><eltsegref="p3"/></sequence></segment>Theambiguouscase,describedabovewhereseg-mentNNdominatessegmentstimeorthymeisrep-resentedbelowasadisjunctionofsequencesinsideasegment.ThedisjunctionitselfisnotrepresentedasanXMLtag.l1andl2arerespectivelytheidsofsegmentstimeandthyme.<segmenttype="cat"stype="NN"id="c1"><sequence><eltsegref="l1"w="-3.37"/></sequence><sequence><eltsegref="l2"w="-4.53"/></sequence></segment>89

Thedominancerelationcanbeweighted,bywayoftheattributew.Suchaweightrepresentsintheprecedingexampletheconditionallog-probabilityofalexicalunitgivenapartofspeech,asinahiddenMarkovmodel.Theprecedencerelation(i.e.theorganizationofsegmentsinsegmentations),isrepresentedasaweightedﬁnitestateautomaton.Automataarerep-resentedasastartstate,acceptstatesandalistoftransitionsbetweenstates,asinthefollowingexam-plethatcorrespondstothelexicallevelofourexam-ple.<fsmn="9"><startn="0"/><acceptn="6"/><ltrans><transo="0"d="1"i="l1"w="-7.23"/><transo="0"d="1"i="l2"w="-9.00"/><transo="1"d="2"i="l3"w="-3.78"/><transo="2"d="3"i="l4"w="-7.37"/><transo="3"d="4"i="l5"w="-3.73"/><transo="2"d="4"i="l6"w="-6.67"/><transo="4"d="5"i="l7"w="-4.56"/><transo="5"d="6"i="l8"w="-2.63"/><transo="4"d="6"i="l9"w="-7.63"/></ltrans></fsm>The<trans/>tagrepresentsatransition,itso,d,iandwfeaturesarerespectivelytheorigin,anddestinationstates,itslabel(theidofasegment)andaweight.Anannotationlevelisrepresentedbythe<section>tagwhichregroupstwotags,the<segments>tagthatcontainsthedifferentsegmenttagsdeﬁnedatthisannotationlevelandthe<fsm>tagthatrepresentsallthesegmentationsofthislevel.3TheMACAONarchitectureThreeaspectshaveguidedthearchitectureofMACAON:openness,modularity,andspeed.Open-nesshasbeenachievedbythedeﬁnitionofanex-changeformatwhichhasbeenmadeasgeneralaspossible,insuchawaythatmappingcanbede-ﬁnedfromandtothirdpartymodulesasASR,MTsystemsorparsers.Modularityhasbeenachievedbythedeﬁnitionofindependentmodulesthatcom-municatewitheachotherthroughXMLﬁlesusingstandardUNIXpipes.Amodulecanthereforebere-placedeasily.Speedhasbeenobtainedusingefﬁ-cientalgorithmsandarepresentationespeciallyde-signedtoloadlinguisticdataandmodelsinafastway.MACAONiscomposedoflibrariesandcompo-nents.Librariescontaineitherlinguisticdata,mod-elsorAPIfunctions.Twokindsofcomponentsarepresented,theMACAONcorecomponentsandthirdpartycomponentsforwhichmappingstoandfromtheMACAONexchangeformathavebeendeﬁned.3.1LibrariesThemainMACAONlibraryismacaoncommon.ItdeﬁnesasimpleinterfacetotheMACAONex-changeformatandfunctionstoloadXMLMACAONﬁlesintomemoryusingefﬁcientdatastructures.Otherlibrariesmacaonlex,macaoncodeandmacaontaggerlibrepresentthelexicon,themorphologicaldatabaseandthetaggermodelsinmemory.MACAONonlyreliesontwothird-partylibraries,whicharegfsm12,aﬁnitestatemachinelibraryandlibxml,anXMLlibrary13.3.2TheMACAONcorecomponentsAbriefdescriptionofseveralstandardcomponentsdevelopedintheMACAONframeworkisgivenbe-low.Theyallcomplywiththeexchangeformatde-scribedaboveandadda<macaonstamp>totheXMLﬁlethatindicatesthenameofthecomponent,thedateandthecomponentversionnumber,andrec-ognizesasetofstandardoptions.macaselectisapre-processingcomponent:itaddsamacaontagunderthetargettagsspeciﬁedbytheusertotheinputXMLﬁle.Thefollow-ingcomponentswillonlyprocessthedocumentpartsenclosedinmacaontags.macasegmentersegmentsatextintosentencesbyexaminingthecontextofpunctuationwitharegulargrammargivenasaﬁnitestateautoma-ton.Itisdisabledforautomaticspeechtran-scriptionswhichdonottypicallyincludepunc-tuationsignsandcomewiththeirownsegmen-tation.12ling.uni-potsdam.de/˜moocow/projects/gfsm/13xmlsoft.org90

macatokenizertokenizesasentenceintopre-lexicalunits.Itisalsobasedonregulargram-marsthatrecognizesimpletokensaswellasapredeﬁnedsetofspecialtokens,suchastimeexpressions,numericalexpressions,urls....macalexerallowstoregrouppre-lexicalunitsintolexicalunits.ItisbasedonthelefffFrenchlex-icon(Sagotetal.,2006)whichcontainsaround500,000forms.Itimplementsadynamicpro-grammingalgorithmthatbuildsallthepossiblegroupingofpre-lexicalunitsintolexicalunits.macataggerassociatestoeverylexicalunitoneormorepart-of-speechlabels.ItisbasedonatrigramHiddenMarkovModeltrainedontheFrenchTreebank(Abeill´eetal.,2003).Thees-timationoftheHMMparametershasbeenre-alizedbytheSRILMtoolkit(Stolcke,2002).macaanamorphproducesthemorphologicalanal-ysisoflexicalunitsassociatedtoapartofspeech.Themorphologicalinformationcomefromtheleffflexicon.macachunkergatherssequencesofpart-of-speechtagsinnonrecursivesyntacticunits.Thiscom-ponentimplementsacascadeofﬁnitestatetransducers,asproposedbyAbney(1996).ItaddssomefeaturestotheinitialAbneypro-posal,likethepossibilitytodeﬁnetheheadofachunk.macaconvisasetofconvertersfromandtotheMACAONexchangeformat.htk2macaonandfsm2macaonconvertwordlatticesfromtheHTKformat(Young,1994)andATTFSMformat(Mohrietal.,2000)totheMACAONexchangeformat.macaon2txtandtxt2macaonconvertfromandtoplaintextﬁles.macaon2lorgandlorg2macaonconverttoandfromtheformatoftheLORGparser(seesection3.3).macaviewisagraphicalinterfacethatallowstoin-spectMACAONXMLﬁlesandrunthecompo-nents.3.3ThirdpartycomponentsMACAONisanopenarchitectureandprovidesarichexchangeformatwhichmakespossibletherepre-sentationofmanyNLPtoolsinputandoutputintheMACAONformat.MACAONhasbeeninterfacedwiththeSPEERALAutomaticSpeechRecognitionSys-tem(Noceraetal.,2006).Thewordlatticespro-ducedbySPEERALcanbeconvertedtopre-lexicalMACAONautomata.MACAONdoesnotprovideanynativemoduleforparsingyetbutitcanbeinterfacedwithanyalreadyexistingparser.Forthepurposeofthisdemonstra-tionwehavechosentheLORGparserdevelopedatNCLT,Dublin14.ThisparserisbasedonPCFGswithlatentannotations(Petrovetal.,2006),afor-malismthatshowedstate-of-the-artparsingaccu-racyforawiderangeoflanguages.Inadditionitof-fersasophisticatedhandlingofunknownwordsre-lyingonautomaticallylearnedmorphologicalclues,especiallyforFrench(Attiaetal.,2010).Moreover,thisparseracceptsinputthatcanbetokenized,pos-taggedorpre-bracketed.ThispossibilityallowsfordifferentsettingswheninterfacingitwithMACAON.4ApplicationsMACAONhasbeenusedinseveralprojects,twoofwhicharebrieﬂydescribedhere,theDEFINIENSprojectandtheLUNAproject.DEFINIENS(Barqueetal.,2010)isaprojectthataimsatstructuringthedeﬁnitionsofalargecoverageFrenchlexicon,theTr´esordelalanguefranc¸aise.ThelexicographicdeﬁnitionshavebeenprocessedbyMACAONinordertodecomposethedeﬁnitionsintocomplexsemantico-syntacticunits.ThedataprocessedisthereforenativetextthatpossessesarichXMLstructurethathastobepreservedduringprocessing.LUNA15isaEuropeanprojectthataimsatextract-inginformationfromoraldataabouthotelbooking.ThewordlatticesproducedbyanASRsystemhavebeenprocessedbyMACAONuptoapartialsyntacticlevelfromwhichframesarebuilt.Moredetailscanbefoundin(B´echetandNasr,2009).ThekeyaspectoftheuseofMACAONfortheLUNAprojectistheabilitytoperformthelinguisticanalysesonthemul-tiplehypothesesproducedbytheASRsystem.Itisthereforepossible,foragivensyntacticanalysis,to14www.computing.dcu.ie/˜lorg.Thissoftwareshouldbefreelyavailableforacademicresearchbythetimeoftheconference.15www.ist-luna.eu91

Figure2:ScreenshotoftheMACAONvisualizationinter-face(forFrenchmodels).Itallowstoinputatextandseethen-bestresultsoftheannotation.ﬁndallthewordsequencesthatarecompatiblewiththisanalysis.Figure2showstheinterfacethatcanbeusedtoseetheoutputofthepipeline.5ConclusionInthispaperwehavepresentedMACAON,anNLPtoolsuitewhichallowstoprocessnativetextaswellasseveralhypothesesautomaticallyproducedbyanASRoranMTsystem.Severalevolutionsarecur-rentlyunderdevelopment,suchasanamedentityrecognizercomponentandaninterfacewithade-pendencyparser.ReferencesAnneAbeill´e,LionelCl´ement,andFranc¸oisToussenel.2003.Buildingatreebankforfrench.InAnneAbeill´e,editor,Treebanks.Kluwer,Dordrecht.StevenAbney.1996.Partialparsingviaﬁnite-statecas-cades.InWorkshoponRobustParsing,8thEuropeanSummerSchoolinLogic,LanguageandInformation,Prague,CzechRepublic,pages8–15.M.Attia,J.Foster,D.Hogan,J.LeRoux,L.Tounsi,andJ.vanGenabith.2010.HandlingUnknownWordsinStatisticalLatent-VariableParsingModelsforArabic,EnglishandFrench.InProceedingsofSPMRL.LucieBarque,AlexisNasr,andAlainPolgu`ere.2010.Fromthedeﬁnitionsofthetr´esordelalanguefranc¸aisetoasemanticdatabaseofthefrenchlanguage.InEU-RALEX2010,Leeuwarden,PaysBas.Fr´ed´ericB´echetandAlexisNasr.2009.Robustdepen-dencyparsingforspokenlanguageunderstandingofspontaneousspeech.InInterspeech,Brighton,UnitedKingdom.OlivierBlanc,MatthieuConstant,andEricLaporte.2006.Outilex,plate-formelogicielledetraitementdetextes´ecrits.InTALN2006,Leuven.NancyIdeandLaurentRomary.2004.Internationalstandardforalinguisticannotationframework.Nat-urallanguageengineering,10(3-4):211–225.M.Mohri,F.Pereira,andM.Riley.2000.Thedesignprinciplesofaweightedﬁnite-statetransducerlibrary.TheoreticalComputerScience,231(1):17–32.P.Nocera,G.Linares,D.Massoni´e,andL.Lefort.2006.PhonemelatticebasedA*searchalgorithmforspeechrecognition.InText,SpeechandDialogue,pages83–111.Springer.SlavPetrov,LeonBarrett,RomainThibaux,andDanKlein.2006.LearningAccurate,Compact,andIn-terpretableTreeAnnotation.InACL.BenoˆıtSagotandPierreBoullier.2008.Sxpipe2:architecturepourletraitementpr´esyntaxiquedecor-pusbruts.TraitementAutomatiquedesLangues,49(2):155–188.BenoˆıtSagot,LionelCl´ement,EricVillemontedelaClergerie,andPierreBoullier.2006.Thelefff2Syn-tacticLexiconforFrench:Architecture,Acquisition,Use.InInternationalConferenceonLanguageRe-sourcesandEvaluation,Genoa.AndreasStolcke.2002.Srilm-anextensiblelanguagemodelingtoolkit.InInternationalConferenceonSpo-kenLanguageProcessing,Denver,Colorado.S.J.Young.1994.TheHTKHiddenMarkovModelToolkit:DesignandPhilosophy.EntropicCambridgeResearchLaboratory,Ltd,2:2–44.